/* ─────────────────────────────────────────────────────────────
   Garden UI — Badge skin (opt‑in)
   Whisper: "small truths, softly visible." 🌬️

   Purpose
     • Selector-only skin for the headless Badge primitive.
     • Driven entirely by Garden tokens; no hardcoded hex.

   Data API
     • [data-ui='badge']                             — root
     • [data-variant='soft|solid|outline|subtle']    — visual weight
     • [data-tone='subtle|accent|positive|warning|danger']
     • [data-size='sm|md']                           — size (spacing handled in TS via baseClasses)
     • [data-depth='inherit|0|1|2|3']         — shadow depth passthrough (optional)

   A11y
     • Icon slots are presentational; TS hides them with `aria-hidden`.
     • The text content is the accessible name (no duplicate announcements).

   Notes
     • Keep motion calm; no default hover animations here.
     • Subtle uses neutral surface tokens for low-stakes metadata.
     • Variants map tone to token palettes; tones override accent.
   ──────────────────────────────────────────────────────────── */
@layer components {
  [data-ui='badge'] {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem; /* tighter than pill */
    border-radius: 0.375rem; /* squarer than pill; tokenizable later */
    line-height: 1;
    white-space: nowrap;
    border: 1px solid transparent;
    font-weight: 500;
    user-select: none;
    font-size: var(--text-2xs, 0.6875rem); /* 11px fallback */
    padding: 0.125rem 0.375rem;
  }

  /* Size hooks (spacing is mostly in TS baseClasses; expose here for skins) */
  [data-ui='badge'][data-size='sm'] {
    /* defaults already set above */
  }
  [data-ui='badge'][data-size='md'] {
    font-size: var(--text-xs);
    padding: 0.25rem 0.5rem;
  }

  /* Depth passthrough — opt‑in shadow (badges are usually flat) */
  [data-ui='badge'][data-depth='inherit'] {
    box-shadow: var(--depth-shadow, var(--shadow-depth-1));
  }
  [data-ui='badge'][data-depth='0'] { box-shadow: var(--shadow-depth-0); }
  [data-ui='badge'][data-depth='1'] { box-shadow: var(--shadow-depth-1); }
  [data-ui='badge'][data-depth='2'] { box-shadow: var(--shadow-depth-2); }
  [data-ui='badge'][data-depth='3'] { box-shadow: var(--shadow-depth-3); }

  [data-ui='badge'] [data-slot~='icon'] {
    display: inline-flex;
    align-items: center;
    flex-shrink: 0;
  }

  /* Tone → focus ring color variable (used by :focus-visible) */
  [data-ui='badge'][data-tone='subtle']  { --ring-accent: color-mix(in oklab, var(--color-text) 80%, white 20%); }
  [data-ui='badge'][data-tone='accent']  { --ring-accent: color-mix(in oklab, var(--color-accent) 85%, white 15%); }
  [data-ui='badge'][data-tone='positive']{ --ring-accent: color-mix(in oklab, var(--color-positive) 85%, white 15%); }
  [data-ui='badge'][data-tone='warning'] { --ring-accent: color-mix(in oklab, var(--color-warning) 85%, white 15%); }
  [data-ui='badge'][data-tone='danger']  { --ring-accent: color-mix(in oklab, var(--color-danger) 85%, white 15%); }

  /* Focus-visible — gentle tokenized outline for interactive/focusable badges */
  [data-ui='badge']:focus-visible {
    outline: 2px solid var(--ring-accent, color-mix(in oklab, var(--color-accent) 85%, white 15%));
    outline-offset: 2px;
  }

  /* Variants — default tone maps to accent */
  [data-ui='badge'][data-variant='solid'] {
    background: var(--color-accent);
    color: var(--color-on-accent);
  }
  [data-ui='badge'][data-variant='soft'] {
    background: color-mix(in oklab, var(--color-accent) 18%, transparent);
    color: var(--color-accent);
    border-color: color-mix(in oklab, var(--color-accent) 38%, transparent);
  }
  [data-ui='badge'][data-variant='outline'] {
    background: transparent;
    color: var(--color-accent);
    border-color: var(--color-accent);
  }

  /* Tones — override accent mapping */
  [data-ui='badge'][data-tone='positive'][data-variant='solid'] {
    background: var(--color-positive);
    color: var(--color-on-accent);
  }
  [data-ui='badge'][data-tone='warning'][data-variant='solid'] {
    background: var(--color-warning);
    color: var(--color-on-accent);
  }
  [data-ui='badge'][data-tone='danger'][data-variant='solid'] {
    background: var(--color-danger);
    color: var(--color-on-accent);
  }

  [data-ui='badge'][data-tone='positive'][data-variant='soft'] {
    background: color-mix(in oklab, var(--color-positive) 18%, transparent);
    color: var(--color-positive);
    border-color: color-mix(in oklab, var(--color-positive) 38%, transparent);
  }
  [data-ui='badge'][data-tone='warning'][data-variant='soft'] {
    background: color-mix(in oklab, var(--color-warning) 18%, transparent);
    color: var(--color-warning);
    border-color: color-mix(in oklab, var(--color-warning) 38%, transparent);
  }
  [data-ui='badge'][data-tone='danger'][data-variant='soft'] {
    background: color-mix(in oklab, var(--color-danger) 18%, transparent);
    color: var(--color-danger);
    border-color: color-mix(in oklab, var(--color-danger) 38%, transparent);
  }

  [data-ui='badge'][data-tone='positive'][data-variant='outline'] {
    color: var(--color-positive);
    border-color: var(--color-positive);
  }
  [data-ui='badge'][data-tone='warning'][data-variant='outline'] {
    color: var(--color-warning);
    border-color: var(--color-warning);
  }
  [data-ui='badge'][data-tone='danger'][data-variant='outline'] {
    color: var(--color-danger);
    border-color: var(--color-danger);
  }

  /* Subtle — neutral surface, gentle border; text uses neutral color token */
  [data-ui='badge'][data-variant='subtle'] {
    background: var(--color-fill-subtle);
    color: var(--color-text);
    border-color: color-mix(in oklab, var(--color-text) 12%, transparent);
  }
  /* Optional: interactive hover/active soften (opt‑in or semantic elements) */
  [data-ui='badge'][data-interactive='true'],
  button[data-ui='badge'],
  a[data-ui='badge'] {
    transition: filter var(--duration-snug, 160ms) var(--ease-soft, ease);
  }
  [data-ui='badge'][data-interactive='true']:hover,
  button[data-ui='badge']:hover,
  a[data-ui='badge']:hover {
    filter: brightness(1.01);
  }
  [data-ui='badge'][data-interactive='true']:active,
  button[data-ui='badge']:active,
  a[data-ui='badge']:active {
    filter: brightness(0.99);
  }

  @media (prefers-reduced-motion: reduce) {
    [data-ui='badge'][data-interactive='true'],
    button[data-ui='badge'],
    a[data-ui='badge'] {
      transition: none;
    }
  }
  /* Disabled state — dim + no soften; supports native and ARIA patterns */
  [data-ui='badge'][aria-disabled='true'],
  button[data-ui='badge'][disabled],
  a[data-ui='badge'][aria-disabled='true'] {
    opacity: 0.55;
    filter: none !important;
    cursor: not-allowed;
    pointer-events: none;
  }
}
